<CompuCell3D>

	<Potts>
		<Dimensions x="300" y="300" z="1"/>
		<Steps>10000</Steps>
		<RandomSeed>313</RandomSeed>
		<CellMotility>
            <MotilityParameters CellType="endothelial_T" Motility="16"/> <!--uPAR, VCAM1 down-->
            <MotilityParameters CellType="endothelial_S" Motility="8"/> <!--uPAR down-->
            <MotilityParameters CellType="macrophage" Motility="30"/>
            <MotilityParameters CellType="mural" Motility="10"/>	<!--PAI-1 down-->
            <MotilityParameters CellType="Apoptotic" Motility="20"/>
        </CellMotility>    
        <Flip2DimRatio>1</Flip2DimRatio>
		<Boundary_x>Periodic</Boundary_x>
		<Boundary_y>Periodic</Boundary_y>
        <LatticeType>Hexagonal</LatticeType>
		<NeighborOrder>4</NeighborOrder>
	</Potts>
    

	<Plugin Name="CellType">
		<CellType TypeName="Medium" TypeId="0"/>
		<CellType TypeName="endothelial_S" TypeId="1"/>
        <CellType TypeName="macrophage" TypeId="2"/>
        <CellType TypeName="mural" TypeId="3"/>
        <CellType TypeName="endothelial_T" TypeId="4"/>
        <CellType TypeName="Wall" TypeId="5" Freeze=""/>
		<CellType TypeName="Apoptotic" TypeId="6" />
		
	</Plugin>

	<Plugin Name="Contact">
		<Energy Type1="Medium" Type2="Medium">0</Energy>
		<Energy Type1="Medium" Type2="mural">-4</Energy>
        <Energy Type1="Medium" Type2="macrophage">-4</Energy>
        <Energy Type1="Medium" Type2="endothelial_T">-4</Energy>
        <Energy Type1="Medium" Type2="endothelial_S">-4</Energy>
        <Energy Type1="Medium" Type2="Wall">0</Energy>
		<Energy Type1="Wall" Type2="Wall">0</Energy>
		<Energy Type1="Wall" Type2="mural">-2</Energy>
        <Energy Type1="Wall" Type2="macrophage">-2</Energy>
        <Energy Type1="Wall" Type2="endothelial_T">-2</Energy>
        <Energy Type1="Wall" Type2="endothelial_S">-2</Energy>
        <Energy Type1="endothelial_S" Type2="endothelial_S">-7</Energy> <!--VCAM1 -->
        <Energy Type1="endothelial_S" Type2="endothelial_T">-7</Energy> <!--VCAM1 -->
        <Energy Type1="endothelial_S" Type2="mural">-5</Energy> 
        <Energy Type1="endothelial_S" Type2="macrophage">-1</Energy> <!--VCAM1 -->
        <Energy Type1="macrophage" Type2="endothelial_T">-4</Energy> <!--VCAM1 -->
        <Energy Type1="macrophage"  Type2="macrophage">-2</Energy>
        <Energy Type1="macrophage"  Type2="mural">-2</Energy>
		<Energy Type1="mural" Type2="endothelial_T">-4</Energy>
        <Energy Type1="mural" Type2="mural">-4</Energy>
		<Energy Type1="endothelial_T" Type2="endothelial_T">-6</Energy> <!--VEGFR2 -->
        <Energy Type1="Apoptotic"  Type2="Apoptotic">0</Energy>
		<Energy Type1="Apoptotic"  Type2="Medium">-2</Energy>
		<Energy Type1="Apoptotic"  Type2="mural">-2</Energy>
        <Energy Type1="Apoptotic"  Type2="macrophage">-3</Energy>
        <Energy Type1="Apoptotic" Type2="endothelial_T">-2</Energy>
        <Energy Type1="Apoptotic" Type2="endothelial_S">-2</Energy>
        <Energy Type1="Apoptotic"  Type2="Wall">-2</Energy>
		
        <NeighborOrder>4</NeighborOrder>
	</Plugin>

	<Plugin Name="VolumeLocalFlex"/>
		
    
    <Plugin Name="SurfaceLocalFlex"/>
		
    
    <Plugin Name="CenterOfMass"/>

    <Plugin Name="NeighborTracker"/>


	<Plugin Name="Chemotaxis">	        
		<ChemicalField Source="FlexibleDiffusionSolverFE" Name="VEGF_sol">
    		<ChemotaxisByType Type="endothelial_T" Lambda="400.0" ChemotactTowards="Medium" SaturationCoef="1"/>
            <ChemotaxisByType Type="endothelial_S" Lambda="200.0" ChemotactTowards="Medium" SaturationCoef="1"/>
	   	</ChemicalField>
        <ChemicalField Source="FlexibleDiffusionSolverFE" Name="sol_Flt1">
    		<ChemotaxisByType Type="endothelial_T" Lambda="-200.0" ChemotactTowards="endothelial_S" SaturationCoef="1"/>
        </ChemicalField>
        <ChemicalField Source="FlexibleDiffusionSolverFE" Name="Protease">
    		<ChemotaxisByType Type="macrophage" Lambda="-200.0" ChemotactTowards="endothelial_T" SaturationCoef="1"/>
        </ChemicalField>
        <ChemicalField Source="FlexibleDiffusionSolverFE" Name="Tie2">  <!--Tie2 -->
    		<ChemotaxisByType Type="mural" Lambda="100.0" ChemotactTowards="endothelial_S" SaturationCoef="1"/>
        </ChemicalField>
        <ChemicalField Source="FlexibleDiffusionSolverFE" Name="VEGF_ext">
    		<ChemotaxisByType Type="endothelial_T" Lambda="600.0"  ChemotactTowards="Medium" SaturationCoef="1"/>
            <ChemotaxisByType Type="endothelial_S" Lambda="300.0"  ChemotactTowards="Medium" SaturationCoef="1"/>
        </ChemicalField>
        <ChemicalField Source="FlexibleDiffusionSolverFE" Name="CCL2">
    		<ChemotaxisByType Type="endothelial_T" Lambda="400.0"  ChemotactTowards="Medium" SaturationCoef="1"/>
            <ChemotaxisByType Type="endothelial_S" Lambda="200.0"  ChemotactTowards="Medium" SaturationCoef="1"/>
    		<ChemotaxisByType Type="macrophage" Lambda="400.0"  ChemotactTowards="Medium" SaturationCoef="1"/>
            
	   	</ChemicalField>

	</Plugin>

	<Plugin Name="PDESolverCaller">
		<CallPDE PDESolverName="FlexibleDiffusionSolverFE" ExtraTimesPerMC="3"/>
	</Plugin>
    
    <Plugin Name="Secretion">
    	
        <Field Name="VEGF_sol" >
            <Secretion Type="endothelial_S" >0.0002</Secretion> <!--EC VEGFR2 inhibition, leads to 10fold secretion drop -->
            <!--Secretion Type="endothelial_T" >0.001</Secretion-->
            <Secretion Type="macrophage" >0.005</Secretion>
            <Secretion Type="mural" >0.005</Secretion>
            <SecretionOnContact Type="endothelial_S" SecreteOnContactWith="mural">0.004</SecretionOnContact>            
            <Uptake Type="endothelial_S" MaxUptake="1" RelativeUptakeRate="0.002"/>
            <Uptake Type="endothelial_T" MaxUptake="1" RelativeUptakeRate="0.002"/>
        </Field>
        
        <Field Name="sol_Flt1" >
            <Secretion Type="endothelial_S" >0.002</Secretion>	<!--Flt1 -->
            <!--SecretionOnContact Type="endothelial_S" SecreteOnContactWith="endothelial_T">0.008</SecretionOnContact-->            
        </Field>
    
        <Field Name="Protease" >	 <!--PAI1 -->
            <Secretion Type="endothelial_T" >0.003</Secretion>
            <Secretion Type="endothelial_S" >0.0003</Secretion>
            <!--SecretionOnContact Type="endothelial_T" SecreteOnContactWith="endothelial_T">0.01</SecretionOnContact-->
            <SecretionOnContact Type="endothelial_T" SecreteOnContactWith="macrophage">0.001</SecretionOnContact>
        </Field>
        
        <Field Name="Tie2" >	 <!--Tie2 -->
            <Secretion Type="endothelial_S" >0.005</Secretion>
            <Secretion Type="endothelial_T" >0.001</Secretion>
            
        </Field>
    
        <Field Name="VEGF_ext" >
            <!--Secretion Type="endothelial_T" >-0.0005</Secretion-->
            <!--Secretion Type="Medium" >0.0005</Secretion-->
            <Secretion Type="mural" >0.005</Secretion>
            <Secretion Type="macrophage" >0.006</Secretion>
            <Uptake Type="endothelial_S" MaxUptake="1" RelativeUptakeRate="0.002"/>
            <Uptake Type="endothelial_T" MaxUptake="1" RelativeUptakeRate="0.002"/>
        </Field>
        
        <Field Name="CCL2" >	<!--CCL2 down, five fold drop in primary secretion-->
            <Secretion Type="endothelial_S" >0.0004</Secretion>
            <Secretion Type="endothelial_T" >0.0008</Secretion>
            <Secretion Type="macrophage" >0.0006</Secretion>
            <SecretionOnContact Type="mural" SecreteOnContactWith="macrophage">0.0002</SecretionOnContact>
            <SecretionOnContact Type="macrophage" SecreteOnContactWith="mural">0.0002</SecretionOnContact>
        </Field>
        
        <Field Name="CXCL10" > <!--CXCL10 down, IC, seven fold drop in primary secretion -->
            <!--Secretion Type="Medium" >0.008</Secretion-->
            <Secretion Type="mural" >0.003</Secretion>
            <Secretion Type="macrophage" >0.0007</Secretion>        
        </Field>

    </Plugin>
    
	<Steppable Type="FlexibleDiffusionSolverFE">
		
		<DiffusionField>
			<DiffusionData>
				<FieldName>VEGF_sol</FieldName>
				<DiffusionConstant>0.18</DiffusionConstant>
				<DecayConstant>0.001</DecayConstant>
			</DiffusionData>

		</DiffusionField>
        
        <DiffusionField>
			<DiffusionData>
				<FieldName>sol_Flt1</FieldName>
				<DiffusionConstant>0.14</DiffusionConstant>
				<DecayConstant>0.004</DecayConstant>
                <DoNotDecayIn>Medium</DoNotDecayIn>
			</DiffusionData>
			
		</DiffusionField>
        
        <DiffusionField>
			<DiffusionData>
				<FieldName>Protease</FieldName>
				<DiffusionConstant>0.2</DiffusionConstant>
				<DecayConstant>0.005</DecayConstant>
                <DoNotDiffuseTo>endothelial_S</DoNotDiffuseTo>
                <!--DoNotDiffuseTo>mural</DoNotDiffuseTo-->
                <DoNotDiffuseTo>endothelial_T</DoNotDiffuseTo>
                <!--DoNotDiffuseTo>macrophage</DoNotDiffuseTo-->
			</DiffusionData>

		</DiffusionField>
        
        <DiffusionField>
			<DiffusionData>
				<FieldName>Tie2</FieldName>
				<DiffusionConstant>0.1</DiffusionConstant>
				<DecayConstant>0.005</DecayConstant>
                <!--DoNotDiffuseTo>endothelial_S</DoNotDiffuseTo-->
                <!--DoNotDiffuseTo>mural</DoNotDiffuseTo-->
                <DoNotDiffuseTo>endothelial_T</DoNotDiffuseTo>
                <!--DoNotDiffuseTo>macrophage</DoNotDiffuseTo-->
			</DiffusionData>

		</DiffusionField>
        
        <DiffusionField>
			<DiffusionData>
				<FieldName>CCL2</FieldName>
				<DiffusionConstant>0.08</DiffusionConstant>
				<DecayConstant>0.002</DecayConstant>
				<!--DoNotDecayIn>endothelial_S</DoNotDecayIn> 
				<DoNotDecayIn>endothelial_T</DoNotDecayIn>
				<DoNotDecayIn>macrophage</DoNotDecayIn>
                <DoNotDecayIn>mural</DoNotDecayIn-->
			</DiffusionData>

            
		</DiffusionField>
                <DiffusionField>
			<DiffusionData>
				<FieldName>CXCL10</FieldName>
				<DiffusionConstant>0.08</DiffusionConstant>
				<DecayConstant>0.002</DecayConstant>
				<!--DoNotDecayIn>endothelial_T</DoNotDecayIn>
				<DoNotDecayIn>macrophage</DoNotDecayIn>
                <DoNotDecayIn>mural</DoNotDecayIn-->
			</DiffusionData>

		</DiffusionField>
        
        <DiffusionField>
			<DiffusionData>
				<FieldName>VEGF_ext</FieldName>
				<DiffusionConstant>0.04</DiffusionConstant>
				<DecayConstant>0.001</DecayConstant>
				<!--DoNotDecayIn>Medium</DoNotDecayIn-->
                
                <CouplingTerm InteractingFieldName="sol_Flt1" CouplingCoefficient="-0.02"/>
                <CouplingTerm InteractingFieldName="Protease" CouplingCoefficient="0.02"/>

			</DiffusionData>

		</DiffusionField>
	</Steppable>

    <!--Steppable Type="PIFInitializer">
        <PIFName>Wall_Setup_big.txt</PIFName>
    </Steppable-->
 
    <!--Steppable Type="BlobInitializer">
        <Region>    
            <Gap>0</Gap>
            <Width>6</Width>
            <Radius>80</Radius>
            <Center x="100" y="100" z="0"/>
            <Types>endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_T, endothelial_T, macrophage, mural</Types>
        </Region>
      
    </Steppable-->

    <Steppable Type="UniformInitializer">
    
        <Region>
            <BoxMin x="50" y="50" z="0"/>
            <BoxMax x="250" y="250" z="1"/>
            <Gap>2</Gap>
            <Width>6</Width>
            <Types>endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_S, endothelial_T, macrophage, mural</Types>
        </Region>
      
    </Steppable>

</CompuCell3D>
